<div class="table table-hover table-borderless table-responsive  table-striped  ps-md-5 mt-3">
  <thead>
    <tr>
      <td>Car Id</td>
      <td>Brand Name</td>
      <td>Color Name</td>
      <td>Findex Point</td>
      <td>Daily Price</td>
      <td>Model Year</td>
      <td>Description</td>
      <td>Image Count</td>
      <td>Update</td>
      <td>Delete</td>
      <td>Edit Images</td>

    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let car of cars">
      <td> {{car.id}} </td>
      <td> {{car.brandName}} </td>
      <td> {{car.colorName}} </td>
      <td> {{car.findexPuan |number}} </td>
      <td> {{car.dailyPrice | currency}} </td>
      <td> {{car.modelYear  }} </td>
      <td> {{car.description}} </td>
      <td> {{car.images.length}} </td>
      <td> <button (click)="updateModal(car)" class="btn btn-secondary" data-bs-toggle="modal"
          data-bs-target="#carUpdate">Update</button> </td>
      <td> <button class="btn btn-danger" (click)="delete(car)">Delete</button> </td>

      <td> <button class="btn btn-danger" (click)="updateModal(car)" class="btn btn-info" data-bs-toggle="modal"
          data-bs-target="#imageUpdate">Edit Image</button> </td>
    </tr>
  </tbody>
</div>

<!-- Update Modal -->
<div class="modal fade" id="carUpdate" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Car Update</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form [formGroup]='updateForm' *ngIf="isFormCreated" (ngSubmit)='update()'>
          <div class="form-group ">
            <label for="name">Brand</label>
            <select class="form-select" formControlName='brandId'>
              <option *ngFor="let brand of brands" [ngValue]='brand.id'> {{brand.name}} </option>
            </select>
          </div>
          <div class="form-group mt-3">
            <label for="name">Color</label>
            <select class="form-select" formControlName='colorId'>
              <option *ngFor="let color of colors" [ngValue]='color.id'> {{color.name}} </option>
            </select>
          </div>
          <div class="form-group mt-3">
            <label for="name">Findex Point</label>
            <input type="number" id="name" class="form-control" formControlName='findexPuan'>
          </div>
          <div class="form-group mt-3">
            <label for="name">Model Year</label>
            <input type="number" id="name" class="form-control" formControlName='modelYear'>
          </div>
          <div class="form-group mt-3">
            <label for="name">Daily Price</label>
            <input type="number" id="name" class="form-control" formControlName='dailyPrice'>
          </div>
          <div class="form-group mt-3 ">
            <label for="name">Description</label>
            <input type="text" id="name" class="form-control" formControlName='description'>
          </div>
          <div class="mt-3 text-center" [ngClass]="message?.success ? ' text-success': 'text-danger'">
            {{message?.message}}
          </div>
          <div class="form-group mt-3 mt-3 d-flex justify-content-center">
            <button type="submit" class="btn btn-primary px-5">Update</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>


<!-- Update Image Modal -->
<div class="modal fade" id="imageUpdate" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Car Update</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form>

          <div class="text-danger">Click for delete</div>
          <div class="image">
            <img *ngFor="let image of currentCar?.images" [src]='defaultUrl  + image.imagePath'
              (click)="confirmDeleteImage(image)" alt="">
          </div>

          <div class="form-group mt-3">
            <label for="name">Images</label>
            <input type="file" id="name" class="form-control" (change)="handleFileInput($event)"
              accept=".jpeg,.png,.jpg" multiple>
          </div>

          <div class="mt-3 text-center" [ngClass]="message?.success ? ' text-success': 'text-danger'">
            {{message?.message}}
          </div>
          <div class="form-group mt-3 mt-3 d-flex justify-content-center">
            <button type="submit" class="btn btn-primary px-5" (click)="updateImages()">Update</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
